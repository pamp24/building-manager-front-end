<form [formGroup]="buildingForm" *ngIf="selectedAction === 'new'" class="editForm" novalidate>
  <h5 class="mb-3">Βήμα 2: Επιπλέον Στοιχεία Κτιρίου (Η Εισαγωγή πρέπει να γίνει από τον Διαχειριστή)</h5>

  <div class="row">
    <!-- Όνομα Κτιρίου -->
    <div class="col-md-6 form-group">
      <label>Όνομα Κτιρίου*</label>
      <input
        type="text"
        class="form-control"
        formControlName="name"
        [ngClass]="{ 'is-invalid': buildingForm.get('name')?.invalid && buildingForm.get('name')?.touched }"
      />
      <div class="invalid-feedback" *ngIf="buildingForm.get('name')?.invalid && buildingForm.get('name')?.touched">
        Το πεδίο είναι υποχρεωτικό.
      </div>
    </div>

    <!-- Οδός 1 -->
    <div class="col-md-6 form-group">
      <label>Οδός 1*</label>
      <input
        type="text"
        class="form-control"
        formControlName="street1"
        [ngClass]="{ 'is-invalid': buildingForm.get('street1')?.invalid && buildingForm.get('street1')?.touched }"
      />
      <div class="invalid-feedback" *ngIf="buildingForm.get('street1')?.invalid && buildingForm.get('street1')?.touched">
        Το πεδίο είναι υποχρεωτικό.
      </div>
    </div>

    <!-- Αριθμός Οδού 1 -->
    <div class="col-md-6 form-group">
      <label>Αριθμός Οδού 1*</label>
      <input
        type="text"
        class="form-control"
        formControlName="stNumber1"
        [ngClass]="{ 'is-invalid': buildingForm.get('stNumber1')?.invalid && buildingForm.get('stNumber1')?.touched }"
      />
      <div class="invalid-feedback" *ngIf="buildingForm.get('stNumber1')?.invalid && buildingForm.get('stNumber1')?.touched">
        Το πεδίο είναι υποχρεωτικό.
      </div>
    </div>

    <!-- Οδός 2 -->
    <div class="col-md-6 form-group">
      <label>Οδός 2</label>
      <input type="text" class="form-control" formControlName="street2" />
    </div>

    <!-- Αριθμός Οδού 2 -->
    <div class="col-md-6 form-group">
      <label>Αριθμός Οδού 2</label>
      <input type="text" class="form-control" formControlName="stNumber2" />
    </div>

    <!-- Πόλη -->
    <div class="col-md-6 form-group">
      <label>Πόλη*</label>
      <input
        type="text"
        class="form-control"
        formControlName="city"
        [ngClass]="{ 'is-invalid': buildingForm.get('city')?.invalid && buildingForm.get('city')?.touched }"
      />
      <div class="invalid-feedback" *ngIf="buildingForm.get('city')?.invalid && buildingForm.get('city')?.touched">
        Το πεδίο είναι υποχρεωτικό.
      </div>
    </div>

    <!-- Περιοχή -->
    <div class="col-md-6 form-group">
      <label>Περιοχή*</label>
      <input
        type="text"
        class="form-control"
        formControlName="region"
        [ngClass]="{ 'is-invalid': buildingForm.get('region')?.invalid && buildingForm.get('region')?.touched }"
      />
      <div class="invalid-feedback" *ngIf="buildingForm.get('region')?.invalid && buildingForm.get('region')?.touched">
        Το πεδίο είναι υποχρεωτικό.
      </div>
    </div>

    <!-- Ταχυδρομικός Κώδικας -->
    <div class="col-md-6 form-group">
      <label>Ταχυδρομικός Κώδικας*</label>
      <input
        type="text"
        class="form-control"
        formControlName="postalCode"
        [ngClass]="{ 'is-invalid': buildingForm.get('postalCode')?.invalid && buildingForm.get('postalCode')?.touched }"
      />
      <div class="invalid-feedback" *ngIf="buildingForm.get('postalCode')?.invalid && buildingForm.get('postalCode')?.touched">
        Το πεδίο είναι υποχρεωτικό και πρέπει να είναι 5 ψηφία.
      </div>
    </div>

    <!-- Χώρα -->
    <div class="col-md-6 form-group">
      <label>Χώρα*</label>
      <select
        class="form-select"
        formControlName="country"
        [ngClass]="{ 'is-invalid': buildingForm.get('country')?.invalid && buildingForm.get('country')?.touched }"
      >
        <option value="">-- Επιλέξτε Χώρα --</option>
        <option *ngFor="let country of countries" [value]="country">{{ country }}</option>
      </select>
      <div class="invalid-feedback" *ngIf="buildingForm.get('country')?.invalid && buildingForm.get('country')?.touched">
        Η επιλογή είναι υποχρεωτική.
      </div>
    </div>

    <!-- Νομός -->
    <div class="col-md-6 form-group">
      <label>Νομός*</label>
      <select
        class="form-select"
        formControlName="state"
        [ngClass]="{ 'is-invalid': buildingForm.get('state')?.invalid && buildingForm.get('state')?.touched }"
      >
        <option value="">-- Επιλέξτε Νομό --</option>
        <option *ngFor="let state of states" [value]="state">{{ state }}</option>
      </select>
      <div class="invalid-feedback" *ngIf="buildingForm.get('state')?.invalid && buildingForm.get('state')?.touched">
        Η επιλογή είναι υποχρεωτική.
      </div>
    </div>

    <!-- Αριθμός Ορόφων -->
    <div class="col-md-6 form-group">
      <label>Αριθμός Ορόφων*</label>
      <input
        type="number"
        class="form-control"
        formControlName="floors"
        [ngClass]="{ 'is-invalid': buildingForm.get('floors')?.invalid && buildingForm.get('floors')?.touched }"
      />
      <div class="invalid-feedback" *ngIf="buildingForm.get('floors')?.invalid && buildingForm.get('floors')?.touched">
        Υποχρεωτικό πεδίο.
      </div>
    </div>

    <!-- Σύνολο Διαμερισμάτων -->
    <div class="col-md-6 form-group">
      <label>Σύνολο Διαμερισμάτων*</label>
      <input
        type="number"
        class="form-control"
        formControlName="apartmentsNum"
        [ngClass]="{ 'is-invalid': buildingForm.get('apartmentsNum')?.invalid && buildingForm.get('apartmentsNum')?.touched }"
      />
      <div class="invalid-feedback" *ngIf="buildingForm.get('apartmentsNum')?.invalid && buildingForm.get('apartmentsNum')?.touched">
        Υποχρεωτικό πεδίο.
      </div>
    </div>

    <!-- Συνολικά τ.μ. -->
    <div class="col-md-6 form-group">
      <label>Συνολικά τ.μ.*</label>
      <input
        type="number"
        class="form-control"
        formControlName="sqMetersTotal"
        [ngClass]="{ 'is-invalid': buildingForm.get('sqMetersTotal')?.invalid && buildingForm.get('sqMetersTotal')?.touched }"
      />
      <div class="invalid-feedback" *ngIf="buildingForm.get('sqMetersTotal')?.invalid && buildingForm.get('sqMetersTotal')?.touched">
        Υποχρεωτικό πεδίο.
      </div>
    </div>

    <!-- Κοινόχρηστα τ.μ. -->
    <div class="col-md-6 form-group">
      <label>Κοινόχρηστα τ.μ.</label>
      <input
        type="number"
        class="form-control"
        formControlName="sqMetersCommonSpaces"
        [ngClass]="{ 'is-invalid': buildingForm.get('sqMetersCommonSpaces')?.invalid && buildingForm.get('sqMetersCommonSpaces')?.touched }"
      />
    </div>
    <div class="col-md-12 form-group">
      <label>Περιγραφή</label>
      <textarea class="form-control" rows="3" formControlName="description" placeholder="Προαιρετική περιγραφή για το κτίριο"></textarea>
    </div>
    <!-- Διαθέτει Πάρκινγκ -->
    <div class="col-md-6 form-group">
      <label>
        <input type="checkbox" [formControlName]="'parkingExists'" />
        Διαθέτει Πάρκινγκ
      </label>
    </div>
    <!-- Θέσεις Πάρκινγκ -->
    <div class="col-md-6 form-group" *ngIf="buildingForm.get('parkingExists')?.value">
      <label>Αριθμός Θέσεων Πάρκινγκ</label>
      <input
        type="number"
        class="form-control"
        formControlName="parkingSpacesNum"
        [ngClass]="{ 'is-invalid': buildingForm.get('parkingSpacesNum')?.invalid && buildingForm.get('parkingSpacesNum')?.touched }"
      />
      <div class="invalid-feedback" *ngIf="buildingForm.get('parkingSpacesNum')?.invalid && buildingForm.get('parkingSpacesNum')?.touched">
        Το πεδίο είναι υποχρεωτικό.
      </div>
    </div>
  </div>
  <div class="row">
    <!-- Διαθέτει Αποθήκες -->
    <div class="col-md-6 form-group">
      <label>
        <input type="checkbox" [formControlName]="'storageExists'" />
        Διαθέτει Αποθήκες
      </label>
    </div>
    <!-- Αριθμός Αποθηκών -->
    <div class="col-md-6 form-group" *ngIf="buildingForm.get('storageExists')?.value">
      <label>Αριθμός Αποθηκών</label>
      <input
        type="number"
        class="form-control"
        formControlName="storageNum"
        [ngClass]="{ 'is-invalid': buildingForm.get('storageNum')?.invalid && buildingForm.get('storageNum')?.touched }"
      />
      <div class="invalid-feedback" *ngIf="buildingForm.get('storageNum')?.invalid && buildingForm.get('storageNum')?.touched">
        Το πεδίο είναι υποχρεωτικό.
      </div>
    </div>
  </div>
  <!-- Διαθέτει Υπογειο -->
  <div class="col-md-6 form-group">
    <label>
      <input type="checkbox" [formControlName]="'undergroundFloorExists'" />
      Διαθέτει Υπόγειο
    </label>
  </div>
  <!-- Διαθέτει Ημιόροφο -->
  <div class="col-md-6 form-group">
    <label>
      <input type="checkbox" [formControlName]="'halfFloorExists'" />
      Διαθέτει Ημιόροφο
    </label>
  </div>
  <!-- Διαθέτει Δώμα -->
  <div class="col-md-6 form-group">
    <label>
      <input type="checkbox" [formControlName]="'overTopFloorExists'" />
      Διαθέτει Δώμα
    </label>
  </div>

  <!-- Ο Διαχειριστής κατοικεί στο κτίριο -->
  <div class="col-md-6 form-group">
    <label>
      <input type="checkbox" [formControlName]="'managerHouseExists'" />
      Ο Διαχειριστής κατοικεί στο κτίριο
    </label>
  </div>

  <!-- Έγγραφα -->
  <div class="col-md-12 form-group">
    <label>Αρχείο Κανονισμού (PDF)</label>
    <input type="file" (change)="onFileSelected($event)" accept="application/pdf" class="form-control" />
  </div>
  
  <div class="form-group text-center mt-3">
    <button type="button" class="btn btn-secondary me-2" (click)="onBack()">Πίσω</button>
    <button type="button" class="btn btn-success" (click)="submitBuildingForm()">Υποβολή</button>
  </div>
</form>
